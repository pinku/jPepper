"use strict";(function(n){var i="*ALL*",r="*JPEPPER*",u="DRAGGED_NODE",f="dragstart",e="dragover",o="drop",s="true",h="jpepperww.0.4.0.js",c=["ERRCODE 1 - jPepper.align: No object found with the specified selector"],t=function(n){return new t.init(n)};t.Error=function(n,t,i,r){this.init(n,t,i,r)};t.Error.prototype.init=function(n,t,i,r){this.source=n;this.code=t;this.message=i;this.args=r};t.Queue=function(){this.tasks=[];this.qi=0;this.running=!1;this.stopped=!0;this.id=+new Date};t.Queue.prototype.add=function(n,t){return n.queue=this,n.queueindex=this.tasks.length,this.tasks.push({task:n,args:t}),this};t.Queue.prototype.start=function(){this.stopped=!1;var n=this.tasks[this.qi].task.fn.apply(this.tasks[this.qi].task,this.tasks[this.qi].args);n&&n instanceof t.Task&&!this.executed&&n.do()};t.Queue.prototype.restart=function(){this.qi=0;this.start()};t.Queue.prototype.next=function(){if(this.stopped==!0)return-1;if(this.qi+=1,this.qi==this.tasks.length)return this.stopped=!0,-1;this.tasks[this.qi].task.prevTask=this.tasks[this.qi-1].task;var n=this.tasks[this.qi].task.fn.apply(this.tasks[this.qi].task,this.tasks[this.qi].args);return n&&n instanceof t.Task&&!this.executed&&(n.outerqueue=this,n.do()),this.qi};t.Queue.prototype.stop=function(){this.stopped=!0};t.Queue.prototype.clear=function(){this.qi=0;this.tasks=[]};t.Task=function(n){this.fn=n;this.args=[];this.executed=!1;for(var t=1,i=arguments.length;t<i;)this.args.push(arguments[t]),t++;this.outerqueue=null;this.innerqueue=new Queue;this.innerqueue.add(this,this.args)};t.TaskInit=function(n,t){var i=new _.Task;return i.fn=n,i.args=t,i.innerqueue.clear(),i.innerqueue.add(i,i.args),i};t.Task.prototype.ok=function(){if(this.executed=!0,this.innerqueue.next()==-1&&this.outerqueue!=null){this.outerqueue.tasks[this.outerqueue.qi].task.executed=!0;this.outerqueue.tasks[this.outerqueue.qi].task.results=this.results;var n=this.outerqueue.next();n==-1&&this.outerqueue.tasks[0].task.outerqueue!=null&&this.outerqueue.tasks[0].task.outerqueue.next()}};t.Task.prototype.donext=t.Task.prototype.ok;t.Task.prototype.err=function(){this.innerqueue.stop()};t.Task.prototype.then=function(n,t){for(var t=[],r=1,u=arguments.length,i;r<u;)t.push(arguments[r]),r++;return i=n,typeof n=="function"&&(i=_.TaskInit(n,t)),i.outerqueue=this.innerqueue,this.innerqueue.add(i,i.args),this};t.Task.prototype.do=function(n){return n!==undefined&&(this.innerqueue.tasks[this.queueindex].args=n),this.executed=!1,this.innerqueue.start(),this};t.onDomReady=function(n){document.onreadystatechange=function(){document.readyState=="complete"&&n.call(document)}};t.each=function(n,t,i){var u,r;if(n instanceof Array){for(r=0,u=n.length;r!=u;)t(n[r],r,i),r++;return}if(n instanceof Object){for(r in n)n.hasOwnProperty(r)&&r!="length"&&t(n[r],r,i);return}};t.POST=function(n,i){return new t.Task(function(n,t){var r=this,u="",i;u=typeof t=="object"?JSON.stringify(t):t;try{i=new XMLHttpRequest;i.open("POST",n,!0);i.setRequestHeader("Content-Type","application/json; charset=utf-8");i.onreadystatechange=function(){i.readyState==4&&i.status==200&&(r.results=i.response,r.donext())};i.send(u)}catch(f){r.results=null;r.error=f;r.err()}},n,i)};t.POSTWW=function(){};t.GET=function(n,i){return new t.Task(function(n,t){var r=this,u="",i;u=typeof t=="object"?JSON.stringify(t):t;try{i=new XMLHttpRequest;i.open("GET",n,!0);i.setRequestHeader("Content-Type","application/json; charset=utf-8");i.onreadystatechange=function(){i.readyState==4&&i.status==200&&(r.results=i.response,r.ok())};i.send(u)}catch(f){r.error=f;r.err()}},n,i)};t.load=function(n,t,i){var r=_.GET(t,i),u=new _.Task(function(n){for(var t=0,i=n.nodes.length;t!=i;)n.nodes[t].innerHTML=n.nodes[t].innerHTML+this.prevTask.results,t++;this.ok()},n);return r.then(u),r};t.extend=function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n};t.events=[];t.data={};t.worker=null;t.addEvent=function(n,t,i,r){for(var u=0,e=_.events.length,f=-1;u!=e;){if(_.events[u]==null){f==-1&&(f=u);u++;continue}if(_.events[u].event==n&&_.events[u].name==t&&_.events[u].node==i&&_.events[u].fn==r)return this;u++}return f!=-1?_.events[f]={event:n,name:t,node:i,fn:r}:_.events[_.events.length]={event:n,name:t,node:i,fn:r},i.addEventListener(n,r,!1),this};t.removeEvent=function(n,t,r){var u,f;if(n!=i&&n!=""&&t!=""){for(u=0,f=_.events.length;u!=f;)_.events[u]!=null&&_.events[u].event==n&&_.events[u].name==t&&_.events[u].node==r&&(r.removeEventListener(n,_.events[u].fn),_.events[u]=null),u++;return this}if(n!=i&&n!=""&&t==""){for(u=0,f=_.events.length;u!=f;)_.events[u]!=null&&_.events[u].event==n&&_.events[u].node==r&&(r.removeEventListener(n,_.events[u].fn),_.events[u]=null),u++;return this}if(n!=i&&n==""&&t!=""){for(u=0,f=_.events.length;u!=f;)_.events[u]!=null&&_.events[u].name==t&&_.events[u].node==r&&(r.removeEventListener(n,_.events[u].fn),_.events[u]=null),u++;return this}if(n==i){for(u=0,f=_.events.length;u!=f;)_.events[u]!=null&&_.events[u].node==r&&(r.removeEventListener(_.events[u].event,_.events[u].fn),_.events[u]=null),u++;return this}};t.triggerEvent=function(n,t,r,u){var f,e;if(n!=i&&n!=""&&t!=""){for(f=0,e=_.events.length;f!=e;)_.events[f]!=null&&_.events[f].event==n&&_.events[f].name==t&&_.events[f].node==r&&_.events[f].fn.call(this,u),f++;return this}if(n!=i&&n!=""&&t==""){for(f=0,e=_.events.length;f!=e;)_.events[f]!=null&&_.events[f].event==n&&_.events[f].node==r&&_.events[f].fn.call(this,u),f++;return this}if(n!=i&&n==""&&t!=""){for(f=0,e=_.events.length;f!=e;)_.events[f]!=null&&_.events[f].name==t&&_.events[f].node==r&&_.events[f].fn.call(this,u),f++;return this}if(n==i){for(f=0,e=_.events.length;f!=e;)_.events[f]!=null&&_.events[f].node==r&&_.events[f].fn.call(this,u),f++;return this}};t.init=function(n){if(this.type="jPepper",this.selector=n,this.nodes=[],this.events=[],this.data={},typeof this.selector=="string"&&(this.nodes=document.querySelectorAll(this.selector)),t.isNodeList(this.selector))for(var i=0,r=this.selector.length;i!=r;)this.nodes.push(this.selector[i]),i++;return typeof this.selector!="object"||this.selector instanceof Array||t.isNodeList(this.selector)||this.nodes.push(this.selector),typeof this.selector=="object"&&this.selector instanceof Array&&(this.nodes=this.selector),this};t.createPlugin=function(n,i){i?t[n.name]=n.fn:t.init.prototype[n.name]=n.fn};t.queryString=function(t,i){var r,f,o,s;if(t===undefined||t!==undefined&&i===undefined){var e={},h=n.location.search.substring(1),u=h.split("&");for(r=0;r<u.length;r++)f=u[r].indexOf("="),f>0&&(o=u[r].substring(0,f),s=u[r].substring(f+1),e[o]=s);return t===undefined?e:e[t]}};t.initWorker=function(n){this.worker=new Worker(n+h)};t.new=function(n){var t=document.createElement(n);return _(t)};t.isNodeList=function(n){return n.constructor.name=="NodeList"?!0:!1};t.newGUID=function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()};t.init.prototype.attr=function(n,t){if(t===undefined)return this.nodes[0].getAttribute(n);for(var i=0,r=this.nodes.length;i!=r;)this.nodes[i].setAttribute(n,t),i++;return this};t.init.prototype.dattr=function(n,t){if(t===undefined)return this.nodes[0].getAttribute("data-"+n);for(var i=0,r=this.nodes.length;i!=r;)this.nodes[i].setAttribute("data-"+n,t),i++;return this};t.init.prototype.removeAttr=function(n){for(var t=0,i=this.nodes.length;t!=i;)this.nodes[t].removeAttribute(n),t++;return this};t.init.prototype.show=function(){for(var n=0,t=this.nodes.length;n!=t;)this.nodes[n].style.display="",n++;return this};t.init.prototype.hide=function(){for(var n=0,t=this.nodes.length;n!=t;)this.nodes[n].style.display="none",n++;return this};t.init.prototype.style=function(n,t){if(t===undefined)return this.nodes[0].style[n];for(var i=0,r=this.nodes.length;i!=r;)this.nodes[i].style[n]=t,i++;return this};t.init.prototype.addClass=function(n){for(var t=0,i=this.nodes.length;t!=i;)this.nodes[t].className=(this.nodes[t].className+" "+n).trim(),t++;return this};t.init.prototype.removeClass=function(n){for(var t=0,i=this.nodes.length;t!=i;)this.nodes[t].className=this.nodes[t].className.replace(new RegExp(n,"gm"),"").trim(),t++;return this};t.init.prototype.empty=function(){for(var n=0,t=this.nodes.length;n!=t;)this.nodes[n].innerHTML=null,n++;return this};t.init.prototype.remove=function(){for(var n=0,t=this.nodes.length;n!=t;)_.removeEvent(i,this.nodes[n]),this.nodes[n].remove(),n++;return this};t.init.prototype.parent=function(){for(var n=0,r=this.nodes.length,i=[];n!=r;)i.push(this.nodes[n].parentNode),n++;return new t.init(i)};t.init.prototype.parents=function(n){for(var r=0,f=this.nodes.length,u=[],i;r!=f;){for(i=this.nodes[r].parentNode;;){if(i==document&&n==document){u.push(document);break}if(i==document&&n!=document)break;if(i.matches(n)){u.push(i);break}i=i.parentNode}r++}return new t.init(u)};t.init.prototype.clone=function(){for(var n=0,r=this.nodes.length,i=[];n!=r;)i.push(this.nodes[n].cloneNode(!0)),n++;return new t.init(i)};t.init.prototype.draggable=function(){for(var t=function(n){_.data[u]=n.target},n=0,i=this.nodes.length;n!=i;)this.nodes[n].setAttribute("draggable",s),_.addEvent(f,r,this.nodes[n],t),n++;return this};t.init.prototype.droppable=function(n){for(var i=this,u=function(t){t.preventDefault();n.dragover!==undefined&&n.dragover.call(i,t)},f=function(t){t.preventDefault();n.drop!==undefined&&n.drop.call(i,t)},t=0,s=this.nodes.length;t!=s;)_.addEvent(e,r,this.nodes[t],u),_.addEvent(o,r,this.nodes[t],f),t++;return this};t.init.prototype.load=function(n,t){return _.load(this,n,t)};t.init.prototype.on=function(n,t,i){var c=this,e,r;if(n!==undefined)for(var o=function(n){t.call(c,n,i)},s=n.split(" "),u=0,l=this.nodes.length;u!=l;){for(var h=this.nodes[u],f=0,a=s.length;f!=a;)e=s[f],r=e.split("."),r.length==1?_.addEvent(e,"",h,o):_.addEvent(r[0],r[1],h,o),f++;u++}return this};t.init.prototype.off=function(n){var s=this,u,o,r,t,f;if(n!==undefined&&n!="")for(var e=n.split(" "),t=0,f=this.nodes.length;t!=f;){for(u=0,o=e.length;u!=o;)r=e[u].split("."),r.length==1?_.removeEvent(r[0],"",this.nodes[t]):_.removeEvent(r[0],r[1],this.nodes[t]),u++;t++}else for(t=0,f=this.nodes.length;t!=f;)_.removeEvent(i,"",this.nodes[t]),t++;return this};t.init.prototype.trigger=function(n,t){var h=this,f,s,u,r,e;if(n!==undefined&&n!="")for(var o=n.split(" "),r=0,e=this.nodes.length;r!=e;){for(f=0,s=o.length;f!=s;)u=o[f].split("."),u.length==1?_.triggerEvent(u[0],"",this.nodes[r],t):_.triggerEvent(u[0],u[1],this.nodes[r],t),f++;r++}else for(r=0,e=this.nodes.length;r!=e;)_.triggerEvent(i,"",this.nodes[r],t),r++;return this};t.init.prototype.val=function(n){if(n===undefined)switch(this.nodes[0].nodeName){case"SPAN":case"DIV":return this.nodes[0].innerHTML;case"INPUT":case"TEXTAREA":case"SELECT":return this.nodes[0].getAttribute("type")=="checkbox"?this.nodes[0].checked?!0:!1:this.nodes[0].value}else{for(var t=0,i=this.nodes.length;t!=i;){switch(this.nodes[t].nodeName){case"SPAN":case"DIV":this.nodes[t].innerHTML=n;break;case"TEXTAREA":case"INPUT":case"SELECT":this.nodes[t].getAttribute("type")=="checkbox"?n==1||n=="on"||n==!0||n=="true"?this.nodes[t].setAttribute("checked","checked"):this.nodes[t].removeAttribute("checked"):this.nodes[t].value=n}t++}return this}};t.init.prototype.innerHTML=function(n){if(n===undefined)return this.nodes[0].innerHTML;for(var t=0,i=this.nodes.length;t!=i;)this.nodes[t].innerHTML=n,t++;return this};t.init.prototype.innerHtml=t.init.prototype.innerHTML;t.init.prototype.innerText=function(n){if(n===undefined)return this.nodes[0].innerText;for(var t=0,i=this.nodes.length;t!=i;)this.nodes[t].innerText=n,t++;return this};t.init.prototype.align=function(n,t){var r=document.querySelectorAll(n),i,u;if(r.length==0)throw c[0];i=0;u=this.nodes.length;switch(t){case"left":while(i!=u)this.nodes[i].style.left=r[0].offsetLeft+"px",i++;break;case"right":while(i!=u)this.nodes[i].style.left=r[0].offsetLeft+r[0].offsetWidth-this.nodes[i].offsetWidth+"px",i++}return this};t.init.prototype.focus=function(){return this.nodes[0].focus(),this};t.init.prototype.append=function(n){var i,r,u;if(n instanceof t.init){for(i=0,r=this.nodes.length;i!=r;){for(var u=this.nodes[i],f=0,e=n.nodes.length;f!=e;)u.appendChild(n.nodes[f]),f++;i++}return this}if(typeof n=="object"){for(i=0,r=this.nodes.length;i!=r;)u=this.nodes[i],u.appendChild(n),i++;return this}if(typeof n=="string"){for(i=0,r=this.nodes.length;i!=r;)u=this.nodes[i],u.innerHTML+=n,i++;return this}return this};t.init.prototype.rect=function(){return this.nodes[0].getBoundingClientRect()};t.init.prototype.find=function(n){return typeof this.selector=="string"?_(this.selector+" "+n):(typeof this.selector=="jPepper.init",typeof this.selector=="object"?_(this.nodes[0].querySelectorAll(n)):void 0)};t.init.prototype.center=function(){for(var n=0,r=this.nodes.length,t,i;n!=r;)t=_(this.nodes[n]),i=t.rect(),t.style("position","absolute").style("top","50%").style("left","50%").style("margin-top","-"+(i.height/2).toString()+"px").style("margin-left","-"+(i.width/2).toString()+"px"),n++};t.init.prototype.disable=function(){for(var n=0,t=this.nodes.length;n!=t;)this.nodes[n].disabled=!0,n++;return this};t.init.prototype.enable=function(){for(var n=0,t=this.nodes.length;n!=t;)this.nodes[n].enabled=!0,n++;return this};n.jPepper=n._=t;n.Queue=_.Queue;n.Task=_.Task})(window);
//# sourceMappingURL=jpepper.0.4.2.min.js.map
