"use strict";(function(n,t){var i=function(n){var a="afterinit",v="beforedestroy",y="afterdestroy",c="beforerender",p="afterrender",w="beforeshow",b="aftershow",k="beforehide",d="afterhide",g="jPControl",nt="jPForm",tt="jPSection",it="jPText",rt="jPTextBox",l="jPButton",ut="jPImage",h=[],ft="data-type",et="data-id",ot=new Event(c),h=["ERRCODE 1 - jPepper.webapp.initFromHtml: No DATA-TYPE attribute specified in the TAG","ERRCODE 2 - jPepper.webapp.initFromHtml: DATA-TYPE attribute does not match any suitable value","ERRCODE 3 - jPepper.webapp.jPForm.initFromHtml: no DATA-TYPE attribute specified in the TAG or wrong value specified. DATA-TYPE must be 'jpform'"],st=document.registerElement("jpc-form"),i=function(){},f,s,e,r,u,o;return i.p=i.prototype,i.p.init=function(t){return this.controls=[],this.opt={id:"",tag:"div",type:g,events:[]},this.el=null,t&&n.extend(this.opt,t),(this.opt.id===undefined||this.opt.id=="")&&(this.opt.id=n.newGUID()),this.triggerEvent(a,""),this},i.p.initFromHtml=function(t){var u=n(t),i=u.dattr("type"),r,c,e,o,s;if(i==null||i==""){s=new n.Error("jPepper.webapp.jPControl.initFromHtml","1",h[0])["throw"]();return}r={};c=u.dattr("id");r.id=c;e=u.dattr("visible");r.visible=e==null||e==1||e=="true"?!0:!1;o=u.attr("class");r.cssclass=o==null?"":o;i=i.toLowerCase();switch(i){case"jpform":return new f(r).initFromHtml(t);default:s=new n.Error("jPepper.webapp.jPControl.initFromHtml","2",h[1])["throw"]();return}},i.p.destroy=function(){this.triggerEvent(v);this.el.destroy();this.triggerEvent(y)},i.p.render=function(){if(this.triggerEvent(c))return this.el=n["new"](this.opt.tag),this.el.attr(ft,this.opt.type).attr(et,this.opt.id),this.opt.cssclass&&this.el.attr("class",this.opt.cssclass),this.opt.style&&this.el.attr("style",this.opt.style),function(t){return n.each(t.controls,function(n,t,i){n.render();n.appendTo(i.el)},t),t}(this),this.triggerEvent(p),this},i.p.appendTo=function(t){if(!t)return this;if(this.el==null&&this.render(),t instanceof jPepper.init)t.append(this.el);else{var i=n(t);i.append(this.el)}return this},i.p.show=function(){if(this.triggerEvent(w))return this.el.show(),this.triggerEvent(b),this},i.p.hide=function(){if(this.triggerEvent(k))return this.el.hide(),this.triggerEvent(d),this},i.p.remove=function(){return this.el.remove(),this},i.p.addControl=function(n){return n.parent=this,this.controls.push(n),n.appendTo(this.el),this},i.p.empty=function(){return this.controls=[],this.el.innerHTML(""),this},i.p.toObject=function(t){var r=this,i={opt:this.opt};return i.opt.controls=[],t&&t.opt.controls.push(i),n.each(this.controls,function(n){n.toobject(i)}),i},i.p.toJson=function(){var n=this.toobject();return JSON.stringify(n)},i.p.on=function(n,t,i){this.addEvent(n,t,i)},i.p.addEvent=function(n,t,i){for(var r=0,u=this.opt.events.length;r!=u;){if(this.opt.events[r]==null){this.opt.events[r]={evt:n,fn:t,args:i};return}r++}this.opt.events.push({evt:n,fn:t,args:i})},i.p.removeEvent=function(n){for(var t=0,i=this.opt.events.length;t!=i;)this.opt.events[t].evt==n&&(this.opt.events[t]=null),t++},i.p.triggerEvent=function(n,t){for(var i=0,r=this.opt.events.length;i!=r;){if(this.opt.events[i].evt==n)return this.opt.events[i].fn.call(this,t);i++}return!0},i.p.cssClass=function(n){if(n)this.opt.cssClass=n,this.el.attr("class",n);else return this.cssClass},f=function(n){this.init(n)},f.prototype=new i,f.constructor=f,f.p=f.prototype,f.p.init=function(t){return i.prototype.init.call(this,t),this.opt.type=nt,this.opt.tag="div",n.extend(this.opt,t),this},f.p.initFromHtml=function(t){var r=n(t),i=r.dattr("type").toLowerCase(),u;if(i==null||i.toLowerCase()!="jpform"){u=new n.Error("jPepper.webapp.jPForm.initFromHtml","3",h[2])["throw"]();return}return this},s=function(n){this.init(n)},s.prototype=new i,s.constructor=s,s.p=s.prototype,s.p.init=function(n){return i.prototype.init.call(this,n),this.opt.type=tt,this.opt.tag="div",this},e=function(n){this.init(n)},e.prototype=new i,e.constructor=e,e.p=e.prototype,e.p.init=function(n){return i.prototype.init.call(this,n),this.opt.type=it,this.opt.tag="span",this},e.p.text=function(n){if(n)this.el.val(n);else return this.el.innerHTML()},r=function(n){this.init(n)},r.prototype=new i,r.constructor=r,r.p=r.prototype,r.p.init=function(n){return i.prototype.init.call(this,n),this.opt.type=rt,this.opt.tag="div",this},r.p.render=function(){return i.prototype.render.call(this),this.el.attr("type","text"),this.renderLabel().renderInput(),this},r.p.renderLabel=function(){if(this.opt.caption){var t=n["new"]("label");t.innerHTML(this.opt.caption);t.attr("for",this.opt.id+"_input");this.el.append(t)}return this},r.p.renderInput=function(){var t=n["new"]("input");return t.attr("type","text").attr("id",this.opt.id+"_input"),this.el.append(t),this},r.p.caption=function(n){if(n)this.opt.caption=n,this.el.empty(),this.renderLabel().renderInput();else return this.opt.caption},u=function(n){this.init(n)},u.prototype=new i,u.constructor=u,u.p=u.prototype,u.p.init=function(n){return i.prototype.init.call(this,n),this.opt.type=l,this.opt.tag="a",this.opt.caption||(this.opt.caption=l),this},u.p.caption=function(n){if(n)this.el.innerHTML(n);else return this.el.innerHTML()},u.p.render=function(){return i.prototype.render.call(this),this.el.attr("href","#").innerHTML(this.opt.caption),this.bindevents(),this},u.p.bindevents=function(){var n=this;if(this.opt.onclick)this.el.on("click",function(t){n.opt.onclick.call(n,t)})},u.p.onclick=function(n){if(n)this.opt.onclick=n,this.bindevents();else return this.opt.onclick},o=function(n){this.init(n)},o.prototype=new i,o.constructor=o,o.p=o.prototype,o.p.init=function(n){return i.prototype.init.call(this,n),this.opt.type=ut,this.opt.tag="img",this},o.p.src=function(n){if(n)this.el.attr("src",n);else return this.el.innerHTML()},t.jPControl=i,t.jPForm=f,t.jPSection=s,t.jPText=e,t.jPTextBox=r,t.jPButton=u,t.jPImage=o,{jPControl:i,jPForm:f}};i(n)})(jPepper,window);